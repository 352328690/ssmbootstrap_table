<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>信息管理页-easyui版本</title>
<link rel="icon" href="favicon.ico">
<link rel="stylesheet" type="text/css"
	href="easyui/themes/default/easyui.css" />
<link rel="stylesheet" type="text/css" href="easyui/themes/icon.css" />
<script src="easyui/jquery.min.js" type="text/javascript"
	charset="utf-8"></script>
<script src="easyui/jquery.easyui.min.js" type="text/javascript"
	charset="utf-8"></script>
<script src="easyui/locale/easyui-lang-zh_CN.js" type="text/javascript"
	charset="utf-8"></script>
<script src="easyui/easyuitabutil.js" type="text/javascript"
	charset="utf-8"></script>
<script src="//cdn.bootcss.com/moment.js/2.11.2/moment.min.js"></script>
<script src="//cdn.bootcss.com/moment.js/2.11.0/locale/zh-cn.js"></script>
<script type="text/javascript">
	$(function() {
		//监听右键事件，创建右键菜单
	    $('#test_tabs').tabs({
	        onContextMenu: function (e, title, index) {
	            e.preventDefault();
	            if (index > 0) {
	                $('#tab_menu').menu('show', {
	                    left: e.pageX,
	                    top: e.pageY
	                }).data("tabTitle", title);
	            }
	        }
	    });
	    //右键菜单click
	    $("#tab_menu").menu({
	        onClick: function (item) {
	            closeTab("test_tabs",this, item.name);
	        }
	    });
	    
		//树形菜单
		$('#help_tree').tree({
			checkbox : false,
			animate : true,
			lines : true,
			onClick : function(node) {
				if (node.id) {
					$('#show_win').panel('refresh', node.id + '.html');
				} else {
					$('#help_tree').tree('expand', node.target);
				}
			}
		});

		/* $('#show_win').panel({
			fit:true,
			border:false,
			noheader:false, 
			href:'basic.html'
		}); */

		var pager = $('#dg').datagrid().datagrid('getPager'); // get the pager of datagrid
		pager.pagination({
			buttons : [ {
				iconCls : 'icon-search',
				handler : function() {
					alert('search');
				}
			}, {
				iconCls : 'icon-add',
				handler : function() {
					alert('add');
				}
			}, {
				iconCls : 'icon-edit',
				handler : function() {
					alert('edit');
				}
			} ]
		});

		$.getJSON('newdata.json', function(data) {

			$("#login_username").text(data.username);
			$("#new_datacount").text(data.newcount);
			$.getJSON('datacount', function(data) {
				var myChart = echarts.init(document
						.getElementById('echarts_test'));
				var option = {
					title : {
						text : '用户注册统计',
						subtext : "时间分组统计",
						subtextStyle : {
							fontSize : 15,
							fontWeight : 'bold',
							color : 'black'
						}
					},
					tooltip : {
						show : true
					},
					legend : {
						data : [ '注册数' ]
					},
					color : '#61a0a8',
					axisType : 'category',
					xAxis : {
						position : "top",
						axisLabel : {
							formatter : function(value) {
								return value + "个";
							}
						}
					},
					yAxis : [ {
						data : data.c
					} ],
					series : [ {
						"name" : "注册数",
						"type" : "bar",
						"data" : data.d,
						itemStyle : {
							normal : {
								color : 'orange'
							}
						},
						label : {
							normal : {
								show : true,
								position : 'right',
								formatter : function(obj) {
									if (obj.value > 0) {
										return obj.value + "个";
									} else {
										return "暂无数据";
									}
								}
							}
						}
					} ]
				};
				// 为echarts对象加载数据 
				myChart.setOption(option);

				var myChart2 = echarts.init(document
						.getElementById('echarts_test2'));
				var option2 = {
					title : {
						text : '用户注册统计',
						subtext : "时间分组统计",
						subtextStyle : {
							fontSize : 15,
							fontWeight : 'bold',
							color : 'black'
						}
					},
					tooltip : {
						show : true
					},
					legend : {
						data : [ '注册数' ]
					},
					color : '#61a0a8',
					axisType : 'category',
					xAxis : {
						position : "top",
						data : data.c,
						axisLabel : {
							formatter : function(value) {
								return value + "时间段";
							}
						}
					},
					yAxis : [ {
						type : "value"
					} ],
					series : [ {
						"name" : "注册数",
						"type" : "bar",
						"data" : data.d,
						itemStyle : {
							normal : {
								color : 'orange'
							}
						},
						label : {
							normal : {
								show : true,
								position : 'top',
								formatter : function(obj) {
									if (obj.value > 0) {
										return obj.value + "个";
									} else {
										return "暂无数据";
									}
								}
							}
						}
					} ]
				};
				// 为echarts对象加载数据 
				myChart2.setOption(option2);
			});

		});
	});

	function sys_exit() {
		if (confirm("确定退出系统吗")) {
			window.location.href = "exit";
		}
	}
	//格式化性别显示
	function formatSex(val, row) {
		var strstyle = "";
		if (val = "男") {
			strstyle = "color:green;";
		} else if (val = "女") {
			strstyle = "color:red;";
		} else {
			strstyle = "color:blue;";
		}
		var str = '<span style="'+strstyle+'">' + val + '</span>';
		return str;
	}
	function operate(val, row) {
		return "<a href='#' class='easyui-linkbutton' iconCls='icon-search'>查询</a>&emsp;"
				+ "<a href='#' class='easyui-linkbutton' iconCls='icon-search'>修改</a>&emsp;"
				+ "<a href='#' class='easyui-linkbutton' iconCls='icon-search'>删除</a>";
	}
	function dateformatter(val, row) {
		return moment.unix(val).format("YYYY-MM-DD hh:mm:ss a");
	}

	function testAddSubPage(domid, title, url) {
		$("#"+domid).tabs("add",{
			title : "百度一下-"+title,
			content : "<iframe runat='server' src='"+url+"' width='100%' height='100%' frameborder='no' border='0' marginwidth='0' marginheight='0' scrolling='no' allowtransparency='yes'></iframe>",
			closable : true
		});
	}
</script>
</head>
<body class="easyui-layout">

	<div data-options="region:'north',split:true,border:true"
		style="height: 55px; background: #C1C1C1; padding: 5px; text-align: right; overflow: hidden;">
		<div
			style="float: left; COLOR: #fff; FONT-SIZE: 22px; FONT-WEIGHT: bold">Easyui后台管理系统</div>
		<div style="COLOR: #fff">
			<A href="#" style="COLOR: #fff; TEXT-DECORATION: none">欢迎您:<span
				id="login_username"></span></A>, <a href="#"
				style="COLOR: #fff; TEXT-DECORATION: none" onclick="sys_exit();">退出系统</a><br />
			<a href="#" title="今日新增数据" class="easyui-tooltip">今日新增:<strong><span
					id="new_datacount"></span></strong></a>
		</div>
	</div>

	<div
		data-options="region:'west',split:true,title:'这是导航窗口操作菜单',iconCls:'icon-help'"
		style="width: 248px; padding: 5px; text-align: left;">
		<ul id="help_tree">

			<li data-options="id:1"><span>演示范例</span>
				<ul>
					<li data-options="id:null,state:'closed'"><span>拖动与菜单</span>
						<ul>
							<li data-options="id:'draggable'">一般拖动 - Draggable</li>
						</ul></li>
					<li data-options="id:null,state:'closed'"><span>按钮与布局</span>
						<ul>
							<li data-options="id:'linkbutton'">链接按钮 - LinkButton</li>
						</ul></li>
					<li data-options="id:null,state:'closed'"><span>数据表格</span>
						<ul>
							<li data-options="id:'datagrid'">数据表格 - Complex DataGrid</li>
						</ul></li>
					<li data-options="id:null,state:'closed'"><span>窗口应用</span>
						<ul>
							<li data-options="id:'window'">窗口 - Window</li>
						</ul></li>
					<li data-options="id:null,state:'closed'"><span>表单相关</span>
						<ul>
							<li data-options="id:'form'">表单 - Form Demo</li>
						</ul></li>
				</ul></li>
			<li data-options="id:1"><span>应用教程</span>
				<ul>
					<li data-options="id:null,state:'closed'"><span>应用与拖动</span>
						<ul>
							<li data-options="id:3001">创建CRUD应用</li>
						</ul></li>
					<li data-options="id:null,state:'closed'"><span>按钮与布局</span>
						<ul>
							<li data-options="id:3009">创建Link Button</li>
						</ul></li>
					<li data-options="id:null,state:'closed'"><span>数据表格</span>
						<ul>
							<li data-options="id:3019">转换table到数据表格</li>
						</ul></li>
					<li data-options="id:null,state:'closed'"><span>窗口应用</span>
						<ul>
							<li data-options="id:3041">创建简单窗口</li>
						</ul></li>
					<li data-options="id:null,state:'closed'"><span>树形菜单</span>
						<ul>
							<li data-options="id:3046">使用标签创建树形菜单</li>
						</ul></li>
					<li data-options="id:null,state:'closed'"><span>表单应用</span>
						<ul>
							<li data-options="id:3054">创建异步提交表单</li>
						</ul></li>
					<li data-options="id:null,state:'closed'"><span>扩展应用</span>
						<ul>
							<li data-options="id:3059">组件加载</li>
						</ul></li>
				</ul></li>
			<li data-options="id:1"><span>使用帮助</span></li>
		</ul>
	</div>
	<div class="calendar-menu-month"
		style="height: 50px; background: #EBEBEB; padding: 5px; overflow: hidden; text-align: right; color: #0066FF"
		data-options="region:'south',split:true,border:true">
		底部声明:<a href="https://git.oschina.net/gradle/ssmbootstrap_table">ssmbootstrap_table</a>
	</div>
	<div data-options="region:'center'"
		style="padding: 0px; text-align: center;">
		<div class="easyui-accordion" style="width: 100%; height: 100%;">
			<div title="echarts展示效果" data-options="iconCls:'icon-ok'"
				style="overflow: auto; padding: 10px;">
				<div class="easyui-layout" style="width: 100%; height: 100%;">
					<div class="row">
						<div id="echarts_test" style="height: 250px;" class="col-md-12"></div>
					</div>
					<div class="row">
						<div id="echarts_test2" style="height: 250px;" class="col-md-12"></div>
					</div>
				</div>
			</div>
			<div title="用户信息datagrid" data-options="iconCls:'icon-help'"
				style="padding: 10px;">
				<div class="easyui-layout" style="width: 100%; height: 100%;">
					<table id="dg" title="用户信息"
						data-options="
								fit:true,
								rownumbers:false,
								singleSelect:true,
								autoRowHeight:true,
								pagination:true,
								url:'user/userlist?format=json',method:'post'"
						style="height: 100%;">
						<thead>
							<tr>
								<!-- <th data-field="id" width="10" style="display:none;"></th> -->
								<th data-options="field:'name'">姓名</th>
								<th data-options="field:'sex'" formatter="formatSex">性别</th>
								<th data-options="field:'age'">年龄</th>
								<th data-options="field:'phone'">手机号</th>
								<th data-options="field:'deliveryaddress'">收货地址</th>
								<th data-options="field:'adddate'" formatter="dateformatter">添加时间</th>
								<th data-options="field:'operate'" formatter="operate">操作</th>
							</tr>
						</thead>
					</table>
				</div>
			</div>
			<div title="用户信息tab" data-options="iconCls:'icon-edit'"
				style="padding:0px;margin:0px;">
				<div class="easyui-tabs" id="test_tabs" style="width: 100%; height: 100%;">
					<div title="About" data-options="tools:'#p-tools'">
						<a href="javascript:void(0)" class="easyui-linkbutton" onclick="testAddSubPage('test_tabs','www.baidu.com','http://www.baidu.com')">打开百度</a>
						<p style="font-size: 14px">jQuery EasyUI framework helps you
							build your web pages easily.</p>
						<ul>
							<li>easyui is a collection of user-interface plugin based on
								jQuery.</li>
							<li>easyui provides essential functionality for building
								modem, interactive, javascript applications.</li>
							<li>using easyui you don't need to write many javascript
								code, you usually defines user-interface by writing some HTML
								markup.</li>
							<li>complete framework for HTML5 web page.</li>
							<li>easyui save your time and scales while developing your
								products.</li>
							<li>easyui is very easy but powerful.</li>
						</ul>
					</div>
					<div title="Help" data-options="iconCls:'icon-help',closable:true"
						style="padding: 10px">This is the help content.</div>
				</div>
				<div id="p-tools">
					<a href="javascript:void(0)" class="icon-mini-add"
						onclick="alert('add')"></a> <a href="javascript:void(0)"
						class="icon-mini-edit" onclick="alert('edit')"></a> <a
						href="javascript:void(0)" class="icon-mini-refresh"
						onclick="alert('refresh')"></a>
				</div>
			</div>
		</div>
	</div>
	
	
	<div id="tab_menu" class="easyui-menu" style="width:120px;">
	    <div id="tab_menu-tabclosrefresh" data-options="name:6">刷新</div>
	    <div id="tab_menu-tabclose" data-options="name:1">关闭</div>
	    <div id="tab_menu-tabcloseall" data-options="name:2">全部关闭</div>
	    <div id="tab_menu-tabcloseother" data-options="name:3">除此之外全部关闭</div>
	    <div class="menu-sep"></div>
	    <div id="tab_menu-tabcloseright" data-options="name:4">当前页右侧全部关闭</div>
	    <div id="tab_menu-tabcloseleft" data-options="name:5">当前页左侧全部关闭</div>
	</div>
	
</body>
<script src="//cdn.bootcss.com/echarts/3.0.0/echarts.min.js"></script>
</html>
